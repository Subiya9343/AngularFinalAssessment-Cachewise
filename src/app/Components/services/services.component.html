<app-header></app-header>

<body>

    <app-nav-bar></app-nav-bar>


    <div class="service-container">
        <form #serviceForm="ngForm" (ngSubmit)="onSubmit(serviceForm)">
            <div class="form">
                <div class="form-group">
                    <label for="companyCode">Company Code*</label>
                    <p-dropdown name="companyCode" [(ngModel)]="companyName" [options]="companyNames" [style]="{'width': '20rem', 'height': '26px', 'margin-right': '30px'}" required></p-dropdown>
                    <div *ngIf="serviceForm.submitted && !companyName" class="error" style="color: red;">
                        Company Code is required
                    </div>
                </div>
                <div class="form-group">
                    <label for="serviceName">Service Name</label>
                    <p-dropdown name="serviceName" [(ngModel)]="serviceName" [options]="serviceslist" [style]="{'width': '20rem', 'height': '26px', 'margin-right': '30px'}"></p-dropdown>
                </div>
                <div class="form-group">
                    <label for="objectName">Object Name</label>
                    <p-dropdown name="objectName" [(ngModel)]="objectName" [options]="objectList" [style]="{'width': '20rem', 'height': '26px', 'margin-right': '30px'}"></p-dropdown>
                </div>
                <div class="button-container">
                    <button type="button" class="cancelButton" (click)="reset(serviceForm)">Reset</button>
                </div>
                <div class="button-container">
                    <button type="submit" class="saveButton">Search</button>
                </div>
            </div>
            <div class="service-data">
                <div *ngFor="let ser of uniqueServicessss" class="mx-2 my-2">
                    <p-card>
                        <div style="padding: 10px 10px;">
                            <i class="pi pi-ellipsis-v" style="display: flex; justify-content: flex-end;"></i>
                            <p class="px-4 mb-0">{{ ser }}</p>
                            <p class="px-4" style="display: flex; justify-content: center; cursor: pointer;" (click)="showServiceDialog(ser)">{{ countedServices[ser]}}</p>
                            <div style="display: flex; justify-content: flex-end;"><button class="btn btn-save" class="clearButton" (click)="showDialog('top')">Clear</button></div>
                            
                        </div>
                    </p-card>
                </div>
            </div>
        </form>
    </div>

    <!--  delete dialog.............. -->
    <p-dialog [(visible)]="visible" [position]="position" [style]="{ width: '50vw' }">
        <div style="padding: 10px 10px;">
            <div style="display: flex; justify-content: center;"><i class="pi pi-question-circle"></i></div>
            <p style="display: flex; justify-content: center; margin-top: 5px;">Do You Want to Clear Cache?...</p>
            <div style="display: flex; justify-content: flex-end;">
                <button type="button" class="noButton">No</button>
                <button type="button" class="yesButton">Yes</button>
            </div>
        </div>
    </p-dialog>

    <!-- service dialog -->
    <div>
        <p-dialog header="Service Name" [(visible)]="displayServiceDailog" [style]="{ width: '88vw', height: '500px'}" [draggable]="false">
            <div style="display: flex;">
                <!-- sidebar----------------- -->
                <div class="sidebar" [class.visible]="!sidebarVisible">
                        <i class="pi pi-angle-left" style=" margin-top: 5px; display: flex; justify-content: flex-end;" (click)="toggleSidebar()"></i>
                    <div>
                        <div *ngFor="let obj of serviceObjectList" class="objectRow">
                            <tr (click)="serviceObjectClicked(obj)">{{obj}}</tr>
                        </div>
                    </div>
                </div>
                <!-- container................ -->
                <div class="main-content" [class.sidebar-closed]="!sidebarVisible" style="margin-left: -14px; margin-top: -10px;">
                    <i *ngIf="sidebarVisible" class="pi pi-angle-right" style="border: 1px solid #1E2E6F; border-radius: 50%;" (click)="toggleSidebar()"></i>
                    <p-card>
                        <div style="padding: 0px 20px;">
                            <p>{{ selectedServiceValues | json }}</p>
                        </div>
                    </p-card>
                </div>
            </div>
            <div style="display: flex; justify-content: flex-end; margin-right: 18px;">
                <button class="clearDialogButton" (click)="clearObject()">Clear</button>
            </div>
        </p-dialog>
    </div>
    
    
</body>